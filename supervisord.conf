; Supervisor main config and NapCat programs
[supervisord]
nodaemon=true
logfile=/var/log/supervisor/supervisord.log

[unix_http_server]
file=/var/run/supervisor.sock
chmod=0700

[supervisorctl]
serverurl=unix:///var/run/supervisor.sock

[program:xvfb]
command=/usr/bin/Xvfb :1 -screen 0 1080x760x16 +extension GLX +render
user=napcat
autostart=true
autorestart=true
startsecs=2
priority=10
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0

[program:qq]
; Use a shell wrapper to allow optional ACCOUNT
command=/bin/bash -lc 'if [ -n "$ACCOUNT" ]; then exec /opt/QQ/qq --no-sandbox -q "$ACCOUNT"; else exec /opt/QQ/qq --no-sandbox; fi'
user=napcat
environment=DISPLAY=":1",FFMPEG_PATH="/usr/bin/ffmpeg"
autostart=true
autorestart=true
startsecs=3
priority=20
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0

